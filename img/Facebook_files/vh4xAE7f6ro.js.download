;/*FB_PKG_DELIM*/

__d("MWAddOnCircleContainer.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={container:{alignItems:"x6s0dn4",backgroundColor:"x1qhmfi1",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",display:"x78zum5",justifyContent:"xl56j7k",$$css:!0},disabled:{backgroundColor:"x1281ex9",$$css:!0}};function a(a){var b=a.children,d=a.disabled;d=d===void 0?!1:d;a=a.size;return h.jsx("div",{className:c("stylex")(i.container,d&&i.disabled),style:{height:a,width:a},children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWLSJewelLoadMoreThreads.bs",["I64","Int64Hooks","LSFactory","LSIntEnum","LSThreadsRangesQuery","Promise","ReQL.bs","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useMemo;function i(a,b){return c("LSThreadsRangesQuery")(b,!0,!1,d("I64").max_int,d("I64").max_int,d("I64").max_int,d("I64").max_int,d("I64").zero,!1,c("LSFactory")(a))}function j(a,e){return d("ReQL.bs").first(d("ReQL.bs").filter(d("ReQL.bs").fromTableAscending(a.table("threads_ranges_v2__generated")),function(a){return d("I64").equal(a.parentThreadKey,e)})).then(function(f){if(f!=null)if(!f.isLoadingBefore&&f.hasMoreBefore)return c("LSThreadsRangesQuery")(e,!0,!1,f.minThreadKey,f.maxThreadKey,f.maxLastActivityTimestampMs,f.minLastActivityTimestampMs,d("I64").zero,!1,c("LSFactory")(a));else return b("Promise").resolve();else return i(a,e)})}function a(a){var b=c("useReStore")();return d("Int64Hooks").useMemoInt64(function(){return function(){var d=b.runInTransaction(function(b){return j(b,a)},"readwrite");c("promiseDone")(d)}},[b,a])}function k(a,e){return d("ReQL.bs").first(d("ReQL.bs").filter(d("ReQL.bs").fromTableAscending(a.table("threads_ranges_v2__generated")),function(a){return d("I64").equal(a.parentThreadKey,e)})).then(function(f){if(f!=null)if(f.isLoadingBefore)return b("Promise").resolve();else return c("LSThreadsRangesQuery")(e,!1,!0,void 0,f.minThreadKey,f.minLastActivityTimestampMs,void 0,d("I64").zero,!1,c("LSFactory")(a));else return i(a,e)})}function e(){var a=c("useReStore")();return h(function(){return function(){var b=a.runInTransaction(function(a){return k(a,d("LSIntEnum").ofNumber(-2))},"readwrite");c("promiseDone")(b)}},[a])}g.loadMoreThreads=j;g.useHook=a;g.useLoadSpamThreads=e}),98);
__d("MWChatSearchFilteringUtils",["LSMessagingThreadTypeUtil","MWChatSearchResultType","MWThreadCreationUtil","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[],c=new Set();a.forEach(function(a){c.has(a.key)||(b.push(a),c.add(a.key))});return b}function h(a,b){if(b!=null)return d("LSMessagingThreadTypeUtil").isSecure(b.threadType);return a!=null?a.isE2EE===!0:!1}function e(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=a.rawData;if(e.resultType!==c("MWChatSearchResultType").USER)return!1;var f=h(e);if(!f)return!1;if(!d("MWThreadCreationUtil").passesWebSearchDefaultE2eeThreadCreationGating())return!1;if(e.defaultE2eeThreadOneToOne===!0)return!0;f=(yield d("MWThreadCreationUtil").checkIfThreadExistsInThreadTable(a,b));return f==null?!1:d("MWThreadCreationUtil").hasDefaultThreadOneToOneCapability(f.threadKey,b)});return i.apply(this,arguments)}g.dedupeByThreadKey=a;g.getIsE2ee=h;g.shouldFilterE2eeThreadsAssociatedWithDefaultE2EEThreadCreationFlow=e}),98);
__d("MWThreadCreationUtil",["FBLogger","I64","LSContactBitOffset","LSIntEnum","LSMessagingThreadTypeUtil","MAWGating","MAWVerifyThreadCutover","MWChatSearchFilteringUtils","MWInboxSecureContentSearch","Promise","ReQL","ReQLSuspense","asyncToGeneratorRuntime","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=m(a);b=d("ReQLSuspense").toArray(d("ReQL").fromTableAscending(b.table("participants")).filter(function(a){return c.has(d("I64").to_string(a.contactId))}).map(function(a){return[d("I64").to_string(a.threadKey),d("I64").to_string(a.contactId)]}),f.id+":52");var e=[],g=new Map();b!=null&&b.forEach(function(b){var c=g.get(b[0]);c=c!=null?c+1:1;g.set(b[0],c);c===a.length&&e.push(b[0])});return e}function e(a,b,e){var f=!1;c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableDescending(b.table("threads").index("lastActivityTimestampMs")).filter(function(b){return a.includes(d("I64").to_string(b.threadKey))&&b.threadName==null})).then(function(a){a!=null&&(f=!0,e(d("LSMessagingThreadTypeUtil").isSecure(a.threadType)))})["catch"](function(a){c("FBLogger")("Armadillo Group TLC").mustfix("Issue getting and navigating to the most recent thread",a)}));return f}function h(a,b){var c=!0;b=d("ReQLSuspense").toArray(d("ReQL").fromTableAscending(b.table("contacts")).filter(function(b){var c=a.has(d("I64").to_string(b.id));c&&a["delete"](d("I64").to_string(b.id));return c}),f.id+":124");for(var e=0;e<b.length;e++)if(b[e]!=null){var g=d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(80),b[e]);if(!g){c=!1;break}}return c}function i(a,b){var c=!0;b=d("ReQLSuspense").toArray(d("ReQL").fromTableAscending(b.table("server_search_results")).filter(function(b){var c=a.has(b.resultId.toString());c&&a["delete"](b.resultId.toString());return c}),f.id+":159");for(var e=0;e<b.length;e++)if(b[e]!=null&&(b[e].defaultE2eeThreads===null||b[e].defaultE2eeThreads===!1)){c=!1;break}return c}function j(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield d("ReQLSuspense").firstExn(d("ReQL").fromTableAscending(b.table("_user_info")).map(function(a){return a.facebookUserId}),f.id+":193"));a=(yield d("MWInboxSecureContentSearch").getThreadOtherParticipantContact(a,c,b));if(a==null)return!1;b=(c=d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(83),a))!=null?c:!1;return b});return k.apply(this,arguments)}function l(a,b,d){if(!d)return!1;d=m(a);a=h(d,b);if(d.size===0||!a)return a;a=i(d,b);if(d.size===0)return a;c("FBLogger")("Armadillo Group TLC").warn("Tokens not in the Contacts table or Server Search Results table");return!1}function m(a){var b=new Set();a.forEach(function(a){a=a.rawData.otherUserId!=null?a.rawData.otherUserId:a.key;b.add(a)});return b}function n(a){return a.rawData.hasCutoverThread===!0||o()&&a.rawData.defaultE2eeThreadOneToOne===!0}function o(){var a=d("MAWGating").isTlcSearchEnabled(),b=c("gkx")("3536");return a&&b}function p(a,c,e){return s(a,c).then(function(e){if(e!=null)if(a.rawData.isE2EE)return b("Promise").resolve(!0);else{e=a.rawData.otherUserId;e=e!=null?e:a.rawData.id;e=d("MAWVerifyThreadCutover").verifyThreadCutover(b("Promise").resolve(c),d("I64").of_string(e));return e}else return b("Promise").resolve(n(a))})}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=d("MWChatSearchFilteringUtils").getIsE2ee(a.rawData);if(e)return!0;e=a.rawData.id;c=(yield d("MAWVerifyThreadCutover").verifyThreadCutover(b("Promise").resolve(c),d("I64").of_string(e)));return c?!0:n(a)});return r.apply(this,arguments)}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.table("threads")).getKeyRange(d("I64").of_string(a.key))));return b});return t.apply(this,arguments)}function u(a,b){if(a!=="group")return b?d("LSIntEnum").ofNumber(15):d("LSIntEnum").ofNumber(1);else return b?d("LSIntEnum").ofNumber(16):d("LSIntEnum").ofNumber(2)}function v(a,b,c,d,e){a.openTabOrInbox({clientThreadKey:b,threadKey:c,threadType:u(d,e)},"search")}g.getExistingThreadsWithTheTokens=a;g.maybeUpdateIsSecureBasedOnUnnamedRecentThread=e;g.hasDefaultThreadOneToOneCapability=j;g.checkE2EEligibilityForEachContact=l;g.passesWebSearchDefaultE2eeThreadCreationGating=o;g.getIsSecureBasedOnContactCapabilitiesForOneToOneThread=p;g.getIsSecureBasedOnContactCapabilitiesForOneToOneThreadV2=q;g.checkIfThreadExistsInThreadTable=s;g.navigateToThread=v}),98);